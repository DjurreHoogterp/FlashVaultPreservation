<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Edit <%= game.title %></title>
  <link rel="stylesheet" href="/css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
  <script>
    const pid = sessionStorage.getItem("pid");
    if (pid) {
      document.getElementById("pid-field").value = pid;
    }
  </script>
  <div class="page-container">
    <%- include('partials/header.ejs') %>

    <h1>Edit game metadata for: <%= game.title %></h1>
    <button onclick="history.back()" class="details-button">Go back</button>
    <form action="/edit/<%= game.id %>" method="POST" class="edit-form">

      <input type="hidden" name="pid" id="pid-field" />
      <input type="hidden" name="assignment" value="<%= assignment %>">
      <label>Title:</label>
      <input type="text" name="title" value="<%= game.title %>" required>

      <label>Description:</label>
      <textarea name="description"><%= game.description %></textarea>

      <label>Genre (comma-separated):</label>
      <input type="text" name="genre" value="<%= game.genre.join(', ') %>">

      <label>Theme (comma-separated):</label>
      <input type="text" name="theme" value="<%= game.theme.join(', ') %>">

      <label>Setting:</label>
      <input type="text" name="setting" value="<%= game.setting %>">

      <label>Visual Style:</label>
      <input type="text" name="visual_style" value="<%= game.visual_style %>">

      <label>Perspective:</label>
      <input type="text" name="perspective" value="<%= game.perspective %>">

      <label>Difficulty:</label>
      <input type="text" name="difficulty" value="<%= game.difficulty %>">

      <label>Controls (comma-separated):</label>
      <input type="text" name="controls" value="<%= game.controls.join(', ') %>">

      <label>Mechanics (comma-separated):</label>
      <input type="text" name="mechanics" value="<%= game.mechanics.join(', ') %>">

      <label>Emotion (comma-separated):</label>
      <input type="text" name="emotion" value="<%= game.emotion.join(', ') %>">

      <label>Character (comma-separated):</label>
      <input type="text" name="character" value="<%= game.character.join(', ') %>">

      <label>Weapons (comma-separated):</label>
      <input type="text" name="weapons" value="<%= game.weapons.join(', ') %>">

      <label>Multiplayer Mode (comma-separated):</label>
      <input type="text" name="multiplayer_mode" value="<%= game.multiplayer_mode?.join(', ') %>">   

      <label>Series Name:</label>
      <input type="text" name="series_name" value="<%= game.series_name %>">

      <label>Series Link:</label>
      <input type="text" name="series_link" value="<%= game.series_link %>">

      <label>Similar Titles (comma-separated):</label>
      <input type="text" name="similar_titles" value="<%= game.similar_titles.join(', ') %>">

      <label>Year:</label>
      <input type="text" name="year" value="<%= game.year %>">

      <label>Platform (comma-separated):</label>
      <input type="text" name="platform" value="<%= game.platform.join(', ') %>">

      <div class="edit-actions">
        <button type="submit">Save Changes</button>
        <a href="/play/<%= game.id %>" class="cancel-button">Cancel</a>
      </div>
    </form>
  </div>
</body>
</html>
