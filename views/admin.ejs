<h1>Session Logs by PID</h1>

<p>Total unique PIDs: <%= Object.keys(logsByPid).length %></p>

<!-- Download button -->
<form method="POST" action="/admin/download" style="margin-bottom: 1em;">
  <button type="submit">⬇️ Download full log as JSON</button>
</form>

<% Object.entries(logsByPid).forEach(([pid, logs]) => { %>
  <details open>
    <summary><strong>PID: <%= pid %></strong> (Total logs: <%= logs.length %>)</summary>
    <ul>
      <% logs.forEach(log => { %>
        <li>
          <strong><%= log.timestamp %></strong> — <code><%= log.action %></code>
          <pre><%= JSON.stringify(log, null, 2) %></pre>
        </li>
      <% }); %>
    </ul>
  </details>
<% }); %>
